
{
  "rules": {
    "users": {
      "$uid": {
        // A user can read their own profile, or an admin can read any profile.
        ".read": "auth != null && (auth.uid == $uid || root.child('users').child(auth.uid).child('accessiblePages').val().contains('/admin/team'))",
        // A user can write to their own profile, or an admin can write to any profile.
        ".write": "auth != null && (auth.uid == $uid || root.child('users').child(auth.uid).child('accessiblePages').val().contains('/admin/team'))"
      }
    },
    "menuItems": {
      // Anyone can read the menu.
      ".read": true,
      // Only admins can write to menu items.
      ".write": "auth != null && root.child('users').child(auth.uid).child('accessiblePages').val().contains('/admin/menu')"
    },
    "preOrders": {
      // Admins and volunteers can read all pre-orders.
      ".read": "auth != null && (root.child('users').child(auth.uid).child('accessiblePages').val().contains('/admin/pre-orders'))",
      "$orderId": {
        // Anyone can create a new pre-order.
        // Admins and volunteers can update an existing one.
        ".write": "!data.exists() || (auth != null && (root.child('users').child(auth.uid).child('accessiblePages').val().contains('/admin/pre-orders')))"
      }
    },
    "sales": {
       // Admins and volunteers can create sales.
      ".write": "auth != null",
       // Only admins and volunteers can read sales data.
      ".read": "auth != null && (root.child('users').child(auth.uid).child('accessiblePages').val().contains('/admin/analytics'))"
    }
  }
}
